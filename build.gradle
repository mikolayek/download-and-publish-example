plugins {
  id "mpern.sap.commerce.build" version "1.0.0"
}
import mpern.sap.commerce.build.tasks.SupportPortalDownload

apply plugin: 'maven-publish'


task downloadCommerce(type: SupportPortalDownload) {
    description "Download hybrisplatform zip file from SAP Support Portal"
    //URL to support portal file (as stated in wiki.hybris.com)
    supportPortalUrl = downloadUrl
    //S/I/D User
    username = "supportUser"
    password = "supportPassword"
    //download target
    targetFile = file("hybris-commerce-suite-${hybrisVersion}.zip")
    //expected md5 hash (Available in support portal, Related Info -> Content Info)
    md5Hash = expectedHash
}

publishing {
    repositories {
        maven {
            url "http://nexus.some.where.com/hybris-releases"
            credentials(PasswordCredentials) {
                username "user"
                password "password"
            }
        }
    }
  publications {
    maven(MavenPublication) {
        artifact("hybris-commerce-suite-${hybrisVersion}.zip") {
            groupId 'de.hybris.platform'
            artifactId 'hybris-commerce-suite'
            version hybrisVersion
            extension "zip"
      }
    }
  }
}